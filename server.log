
> canva-clone@1.0.1 dev
> next dev

  ‚ñ≤ Next.js 14.2.14
  - Local:        http://localhost:3000
  - Environments: .env.local

 ‚úì Starting...
 ‚úì Ready in 1131ms
 ‚úì Compiled /src/middleware in 89ms (72 modules)
 ‚óã Compiling / ...
 ‚úì Compiled / in 3.4s (1964 modules)
 GET / 200 in 3854ms
 ‚úì Compiled in 338ms (482 modules)
 ‚óã Compiling /api/auth/[...nextauth] ...
 ‚úì Compiled /api/auth/[...nextauth] in 782ms (1468 modules)
 GET / 200 in 396ms
 GET /api/auth/session 200 in 1170ms
 GET /api/auth/session 200 in 7ms
 GET /api/auth/session 200 in 6ms
 ‚óã Compiling /demo ...
 ‚úì Compiled /demo in 8.8s (2987 modules)
 ‚óã Compiling /api/[[...route]] ...
 ‚úì Compiled /api/[[...route]] in 731ms (2278 modules)
üéØ OpenAI Vision Service: API Key available: true
‚úÖ OpenAI Vision Service initialized successfully
üéØ OpenAI Vision Service: API Key available: true
‚úÖ OpenAI Vision Service initialized successfully
üîç Testing OpenAI connection...
 GET /api/ai/test-openai 200 in 2076ms
üß† TRUE AI Vision-powered resize request
üìä Request data: {
  currentSize: { width: 400, height: 400 },
  newSize: { width: 600, height: 600 },
  objectsCount: 3,
  imageSize: 121140,
  envKey: true
}
üîë OpenAI API key found, initializing service...
üéØ OpenAI Vision Service: API Key available: true
‚úÖ OpenAI Vision Service initialized successfully
ü§ñ Performing direct AI resize with simplified prompt...
üéØ OpenAI Vision Service: API Key available: true
‚úÖ OpenAI Vision Service initialized successfully
üîß Force-scaled obj_0 to fit: scale=0.30
üîß Validating layer obj_0: {
  original: { left: 30, top: 30, scaleX: 0.5, scaleY: 0.5 },
  validated: { left: 30, top: 30, scaleX: 0.3, scaleY: 0.3 },
  finalSize: { width: 576, height: 432 },
  canvasSize: { width: 600, height: 600 },
  boundaries: { rightEdge: 606, bottomEdge: 462, maxRight: 570, maxBottom: 570 },
  withinBounds: false
}
üîß Validating layer obj_1: {
  original: { left: 30, top: 520, scaleX: 1.2, scaleY: 1.2 },
  validated: { left: 30, top: 461.52, scaleX: 1.2, scaleY: 1.2 },
  finalSize: { width: 437.390625, height: 108.47999999999999 },
  canvasSize: { width: 600, height: 600 },
  boundaries: {
    rightEdge: 467.390625,
    bottomEdge: 570,
    maxRight: 570,
    maxBottom: 570
  },
  withinBounds: true
}
üîß Validating layer obj_2: {
  original: { left: 200, top: 450, scaleX: 1, scaleY: 1 },
  validated: { left: 200, top: 450, scaleX: 1, scaleY: 1 },
  finalSize: { width: 140, height: 50 },
  canvasSize: { width: 600, height: 600 },
  boundaries: { rightEdge: 340, bottomEdge: 500, maxRight: 570, maxBottom: 570 },
  withinBounds: true
}
‚úÖ Direct AI resize completed: {
  layoutStrategy: 'I arranged the elements to maintain a clear visual hierarchy, ensuring that the product image remains prominent while the logo and call-to-action button are easily accessible and readable. The elements are spaced appropriately to create balance and maintain white space.',
  placements: [
    {
      id: 'obj_0',
      left: 30,
      top: 30,
      scaleX: 0.3,
      scaleY: 0.3,
      reasoning: 'The product image is scaled down to fit within the canvas while remaining prominent. Positioned at (30, 30) to maintain margins.'
    },
    {
      id: 'obj_1',
      left: 30,
      top: 461.52,
      scaleX: 1.2,
      scaleY: 1.2,
      reasoning: "The textbox 'KREDIVO' is scaled up slightly for visibility and positioned at the bottom to create a strong base for the design."
    },
    {
      id: 'obj_2',
      left: 200,
      top: 450,
      scaleX: 1,
      scaleY: 1,
      reasoning: 'The call-to-action button is positioned centrally below the product image, ensuring it stands out and is easily clickable.'
    }
  ],
  designRationale: 'This arrangement creates an elegant, professional layout by ensuring all elements are visible and well-aligned within the canvas. The product image is the focal point, while the logo and call-to-action are clearly defined, promoting user engagement and maintaining modern design aesthetics. [Validated for canvas boundaries]',
  appliedPrinciples: [ 'smart scaling', 'layout preservation' ]
}
 POST /api/ai/vision-resize 200 in 6920ms
üîç Testing OpenAI connection...
üéØ OpenAI Vision Service: API Key available: true
‚úÖ OpenAI Vision Service initialized successfully
 GET /api/ai/test-openai 200 in 723ms
üß† TRUE AI Vision-powered resize request
üìä Request data: {
  currentSize: { width: 600, height: 600 },
  newSize: { width: 300, height: 300 },
  objectsCount: 3,
  imageSize: 275340,
  envKey: true
}
üîë OpenAI API key found, initializing service...
üéØ OpenAI Vision Service: API Key available: true
‚úÖ OpenAI Vision Service initialized successfully
ü§ñ Performing direct AI resize with simplified prompt...
üéØ OpenAI Vision Service: API Key available: true
‚úÖ OpenAI Vision Service initialized successfully
üîß Force-scaled obj_0 to fit: scale=0.30
üîß Validating layer obj_0: {
  original: { left: 30, top: 30, scaleX: 0.5, scaleY: 0.5 },
  validated: { left: 30, top: 30, scaleX: 0.3, scaleY: 0.3 },
  finalSize: { width: 576, height: 432 },
  canvasSize: { width: 300, height: 300 },
  boundaries: { rightEdge: 606, bottomEdge: 462, maxRight: 270, maxBottom: 270 },
  withinBounds: false
}
üîß Validating layer obj_1: {
  original: { left: 50, top: 230, scaleX: 0.6, scaleY: 0.6 },
  validated: { left: 50, top: 215.76, scaleX: 0.6, scaleY: 0.6 },
  finalSize: { width: 218.6953125, height: 54.239999999999995 },
  canvasSize: { width: 300, height: 300 },
  boundaries: {
    rightEdge: 268.6953125,
    bottomEdge: 270,
    maxRight: 270,
    maxBottom: 270
  },
  withinBounds: true
}
üîß Validating layer obj_2: {
  original: { left: 50, top: 200, scaleX: 0.5, scaleY: 0.5 },
  validated: { left: 50, top: 200, scaleX: 0.5, scaleY: 0.5 },
  finalSize: { width: 70, height: 25 },
  canvasSize: { width: 300, height: 300 },
  boundaries: { rightEdge: 120, bottomEdge: 225, maxRight: 270, maxBottom: 270 },
  withinBounds: true
}
‚úÖ Direct AI resize completed: {
  layoutStrategy: "I arranged the elements to maintain a clear visual hierarchy by positioning the product image centrally, the headline 'KREDIVO' at the bottom for prominence, and the call-to-action 'Click Here' above it to ensure visibility and engagement.",
  placements: [
    {
      id: 'obj_0',
      left: 30,
      top: 30,
      scaleX: 0.3,
      scaleY: 0.3,
      reasoning: 'The product image is scaled down to maintain clarity and is positioned with a margin to ensure it fits within the canvas.'
    },
    {
      id: 'obj_1',
      left: 50,
      top: 215.76,
      scaleX: 0.6,
      scaleY: 0.6,
      reasoning: "The 'KREDIVO' text is scaled appropriately and positioned at the bottom to maintain prominence while adhering to the margin requirements."
    },
    {
      id: 'obj_2',
      left: 50,
      top: 200,
      scaleX: 0.5,
      scaleY: 0.5,
      reasoning: "The 'Click Here' text is scaled down and placed above the 'KREDIVO' text to create a clear call-to-action without overcrowding the design."
    }
  ],
  designRationale: 'This arrangement creates an elegant and professional layout by ensuring all elements are visible, well-aligned, and maintain a balanced white space. The hierarchy is clear, with the product image drawing attention first, followed by the call-to-action and headline, optimizing the design for the new size. [Validated for canvas boundaries]',
  appliedPrinciples: [ 'smart scaling', 'layout preservation' ]
}
 POST /api/ai/vision-resize 200 in 7276ms
üîç Testing OpenAI connection...
üéØ OpenAI Vision Service: API Key available: true
‚úÖ OpenAI Vision Service initialized successfully
 GET /api/ai/test-openai 200 in 1019ms
üß† TRUE AI Vision-powered resize request
üìä Request data: {
  currentSize: { width: 300, height: 300 },
  newSize: { width: 200, height: 100 },
  objectsCount: 3,
  imageSize: 97144,
  envKey: true
}
üîë OpenAI API key found, initializing service...
üéØ OpenAI Vision Service: API Key available: true
‚úÖ OpenAI Vision Service initialized successfully
ü§ñ Performing direct AI resize with simplified prompt...
üéØ OpenAI Vision Service: API Key available: true
‚úÖ OpenAI Vision Service initialized successfully
üîß Force-scaled obj_0 to fit: scale=0.30
üîß Validating layer obj_0: {
  original: { left: 30, top: 30, scaleX: 0.5, scaleY: 0.5 },
  validated: { left: 30, top: 30, scaleX: 0.3, scaleY: 0.3 },
  finalSize: { width: 576, height: 432 },
  canvasSize: { width: 200, height: 100 },
  boundaries: { rightEdge: 606, bottomEdge: 462, maxRight: 170, maxBottom: 70 },
  withinBounds: false
}
üîß Force-scaled obj_1 to fit: scale=0.38
üîß Validating layer obj_1: {
  original: { left: 30, top: 5, scaleX: 0.5, scaleY: 0.5 },
  validated: {
    left: 30,
    top: 30,
    scaleX: 0.3840960240060015,
    scaleY: 0.3840960240060015
  },
  finalSize: { width: 140, height: 34.72228057014253 },
  canvasSize: { width: 200, height: 100 },
  boundaries: {
    rightEdge: 170,
    bottomEdge: 64.72228057014253,
    maxRight: 170,
    maxBottom: 70
  },
  withinBounds: true
}
üîß Validating layer obj_2: {
  original: { left: 30, top: 80, scaleX: 0.5, scaleY: 0.5 },
  validated: { left: 30, top: 45, scaleX: 0.5, scaleY: 0.5 },
  finalSize: { width: 70, height: 25 },
  canvasSize: { width: 200, height: 100 },
  boundaries: { rightEdge: 100, bottomEdge: 70, maxRight: 170, maxBottom: 70 },
  withinBounds: true
}
‚úÖ Direct AI resize completed: {
  layoutStrategy: "I arranged the elements to ensure that the product image remains prominent while keeping the logo and call-to-action visible. The logo is positioned at the top for immediate recognition, the product image is centered for visual impact, and the call-to-action is placed below the logo to guide the viewer's eye.",
  placements: [
    {
      id: 'obj_0',
      left: 30,
      top: 30,
      scaleX: 0.3,
      scaleY: 0.3,
      reasoning: 'This positioning keeps the product image within the canvas boundaries while allowing for sufficient white space around it.'
    },
    {
      id: 'obj_1',
      left: 30,
      top: 30,
      scaleX: 0.3840960240060015,
      scaleY: 0.3840960240060015,
      reasoning: 'The logo is scaled down and positioned at the top left to maintain visibility and brand recognition without crowding the design.'
    },
    {
      id: 'obj_2',
      left: 30,
      top: 45,
      scaleX: 0.5,
      scaleY: 0.5,
      reasoning: "The call-to-action is placed at the bottom, ensuring it's easily visible and encourages user interaction."
    }
  ],
  designRationale: 'This arrangement creates a balanced layout with clear visual hierarchy. The logo is prominent, the product image is the focal point, and the call-to-action is easily accessible, all while adhering to modern design principles of clarity and contrast. [Validated for canvas boundaries]',
  appliedPrinciples: [ 'smart scaling', 'layout preservation' ]
}
 POST /api/ai/vision-resize 200 in 7914ms
